(this["webpackJsonpreact-challenge"]=this["webpackJsonpreact-challenge"]||[]).push([[0],{49:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var a=t(1),i=t(0),r=t.n(i),o=t(29),c=t.n(o),s=t(2),d=t(10),l=t(3),p=t(16),h=t(17),f=t(20),u=t(19),x=t(26),g=t(35),j=t(9),b=t(5),m="search/profiles",O=Object(b.a)("".concat(m,"/sort-ascending")),C=Object(b.a)("".concat(m,"/sort-descending")),y=Object(b.a)("".concat(m,"/request/pending")),v=Object(b.a)("".concat(m,"/response/success")),w=Object(b.a)("".concat(m,"/response/error")),_="search/profiles/poll",P=Object(b.a)("".concat(_,"/set-auto-fetch")),I=Object(b.a)("".concat(_,"/set-countdown-text")),N=Object(b.a)("".concat(_,"/request/pending")),k=Object(b.a)("".concat(_,"/response/success")),S=Object(b.a)("".concat(_,"/response/error")),q=function(e,n){return n.payload},z=function(e){return function(){return e}},A=Object(j.b)({autoFetchProfiles:Object(b.b)(!1,(function(e){e.addCase(P,q),e.addCase(v,z(!0)),e.addCase(w,z(!0))})),countdownText:Object(b.b)("",(function(e){e.addCase(I,q),e.addCase(P,(function(e,n){return n.payload?"10":""}))})),profiles:Object(b.b)([],(function(e){e.addCase(O,(function(e){return e.sort((function(e,n){return e.handle>n.handle?1:-1}))})),e.addCase(C,(function(e){return e.sort((function(e,n){return e.handle<n.handle?1:-1}))})),e.addCase(v,q),e.addCase(k,q)})),queries:Object(j.b)({loadProfiles:Object(b.b)({initial:!0,loading:!1,error:null},(function(e){e.addCase(y,(function(e){return e.loading=!0,e.initial=!1,e.error=!1,e})),e.addCase(w,(function(e,n){return e.loading=!1,e.error=n.payload,e})),e.addCase(v,(function(e,n){return e.loading=!1,e}))})),pollProfiles:Object(b.b)({loading:!1,error:null},(function(e){e.addCase(N,(function(e){return e.loading=!0,e.error=null,e})),e.addCase(S,(function(e,n){return e.loading=!1,e.error=n.payload,e})),e.addCase(k,(function(e,n){return e.loading=!1,e.error=null,e}))}))})}),T=r.a.createContext(),M=A(void 0,{type:"__initialize__"});function H(e){var n=e.children,t=r.a.useReducer(A,M),i=Object(g.a)(t,2),o=i[0],c=i[1];return Object(a.jsx)(T.Provider,{value:Object(x.a)(Object(x.a)({},o),{},{dispatch:c,authToken:"Bearer: AbCdEf123456",pollInterval:10}),children:n})}var L=function(e){return e.authToken},W=function(e){var n=e.queries.loadProfiles,t=e.profiles;return!n.initial&&(!n.loading||t.length>0)},R=function(e){var n=e.queries.loadProfiles;return!n.initial&&!n.loading},B=function(e){var n;return null===(n=e.queries.loadProfiles)||void 0===n?void 0:n.error},E=function(e){return e.pollInterval},D=s.a.button.withConfig({displayName:"MinimalButton",componentId:"sc-5xgby3-0"})(["background:transparent;border:0px;cursor:pointer;margin:8px;"]),U=s.a.div.withConfig({displayName:"SearchCard__CardContainer",componentId:"bc0sq7-0"})(["display:flex;justify-content:center;align-items:center;"]),F=s.a.div.withConfig({displayName:"SearchCard__Card",componentId:"bc0sq7-1"})(["border:1px solid lightgray;border-radius:8px;box-shadow:0px 3px 6px lightgray,0px 3px 6px;overflow:hidden;position:relative;width:200px;height:200px;"]),J=s.a.div.withConfig({displayName:"SearchCard__CardOverlay",componentId:"bc0sq7-2"})(["position:absolute;width:100%;bottom:0px;border-radius:inherit;overflow:hidden;box-sizing:border-box;padding:8px;color:white;display:flex;flex-direction:column;"]),G=s.a.h6.withConfig({displayName:"SearchCard__HandleWrapper",componentId:"bc0sq7-3"})(["font-size:16px;padding-bottom:4px;"]),K=s.a.div.withConfig({displayName:"SearchCard__BottomInfoRow",componentId:"bc0sq7-4"})(["display:flex;justify-content:space-between;align-items:baseline;margin-bottom:4px;margin-right:4px;"]),Q=function(e){Object(f.a)(t,e);var n=Object(u.a)(t);function t(){return Object(p.a)(this,t),n.apply(this,arguments)}return Object(h.a)(t,[{key:"render",value:function(){var e=this.props,n=e.photoUrl,t=void 0===n?"":n,i=e.handle,r=void 0===i?"":i,o=e.location,c=void 0===o?"":o,s=e.age,l=void 0===s?99:s,p=e.photoCount,h=void 0===p?0:p,f=e.id;return Object(a.jsx)(U,{children:Object(a.jsx)(d.b,{to:"/profile/".concat(f),children:Object(a.jsxs)(F,{children:[Object(a.jsx)("img",{src:t,alt:"potential date"}),Object(a.jsxs)(J,{children:[Object(a.jsx)(G,{children:r}),Object(a.jsxs)(K,{children:[Object(a.jsx)("span",{children:c?"".concat(l," \u2022 ").concat(c):l}),h>1&&Object(a.jsx)("span",{children:h})]})]})]})})})}}]),t}(r.a.PureComponent),V=t(34),X=t.n(V),Y=t(12),Z=t.n(Y),$=t(18),ee=function(){var e=Object($.a)(Z.a.mark((function e(n,t,a){var i,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.signal.aborted){e.next=23;break}if(0!==a){e.next=21;break}return n.dispatch(I("Loading...")),n.dispatch(N()),e.prev=4,e.next=7,fetch("/api/profiles",{method:"get",headers:new Headers({Authorization:L(n),"Content-Type":"application/json"}),signal:t.signal});case 7:return i=e.sent,e.next=10,i.json();case 10:r=e.sent,n.dispatch(k(r)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0),n.dispatch(S(e.t0));case 18:ee(n,t,E(n)),e.next=23;break;case 21:n.dispatch(I("".concat(a))),setTimeout((function(){return ee(n,t,a-1)}),1e3);case 23:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(n,t,a){return e.apply(this,arguments)}}(),ne=s.a.div.withConfig({displayName:"PollWidget__WidgetContainer",componentId:"syj1wd-0"})(["display:flex;align-items:center;font-size:1.333rem;"]),te=s.a.label.withConfig({displayName:"PollWidget__Label",componentId:"syj1wd-1"})(["display:flex;cursor:pointer;align-items:center;font-size:1.333rem;& > *{margin-right:0.5rem;user-select:none;}"]);function ae(e){var n=Object(i.useContext)(T),t=Object(i.useRef)(new AbortController),r=Object(i.useRef)();r.current=n;var o=n.autoFetchProfiles,c=E(n),s=function(e){return e.countdownText}(n);return Object(i.useEffect)((function(){t.current.abort(),o&&(t.current=new AbortController,ee(r.current,t.current,c))}),[o,c]),Object(a.jsxs)(ne,{children:[Object(a.jsxs)(te,{children:[Object(a.jsx)("span",{children:"Auto-Refetch"}),Object(a.jsx)(X.a,{disabled:e.disabled,onChange:function(e){return n.dispatch(P(e))},checked:o,uncheckedIcon:!1,checkedIcon:!1,height:20,width:48,handleDiameter:28,onColor:"#899bf5",onHandleColor:"#1234e6",offHandleColor:"#CCCCCC"})]}),Object(a.jsx)("span",{children:s})]})}var ie=s.a.div.withConfig({displayName:"ScreenMessages__ScreenMessage",componentId:"sc-20ryp8-0"})(["display:flex;justify-content:center;align-items:center;flex-grow:1;font-size:4em;"]),re=Object(s.a)(ie).withConfig({displayName:"ScreenMessages__ErrorMessage",componentId:"sc-20ryp8-1"})(["color:red;"]),oe=function(){var e=Object($.a)(Z.a.mark((function e(n,t){var a,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(y()),e.prev=1,e.next=4,fetch("/api/profiles",{method:"get",headers:new Headers({Authorization:L(t),"Content-Type":"application/json"})});case 4:return a=e.sent,e.next=7,a.json();case 7:i=e.sent,n(v(i)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),n(w(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n,t){return e.apply(this,arguments)}}(),ce=s.a.main.withConfig({displayName:"SearchPage__Main",componentId:"sc-1lfq4c1-0"})(["margin:24px;display:flex;flex-direction:column;flex-grow:1;"]),se=s.a.div.withConfig({displayName:"SearchPage__SearchControlsRow",componentId:"sc-1lfq4c1-1"})(["display:flex;justify-content:flex-end;align-items:center;"]),de=s.a.div.withConfig({displayName:"SearchPage__LeftSearchControls",componentId:"sc-1lfq4c1-2"})(["margin-right:auto;"]),le=s.a.div.withConfig({displayName:"SearchPage__SearchCardsContainer",componentId:"sc-1lfq4c1-3"})(["display:flex;flex-wrap:wrap;gap:40px;margin-top:16px;@media screen and (max-width:500px){justify-content:center;}"]),pe=function(e){Object(f.a)(t,e);var n=Object(u.a)(t);function t(){var e;Object(p.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=n.call.apply(n,[this].concat(i))).handleSortAscending=function(){e.context.dispatch(O())},e.handleSortDescending=function(){e.context.dispatch(C())},e}return Object(h.a)(t,[{key:"componentDidMount",value:function(){W(this.context)||oe(this.context.dispatch,this.context)}},{key:"renderProfiles",value:function(e){return W(this.context)?B(this.context)?Object(a.jsx)(re,{children:"An error occured loading profiles"}):0===e.length?Object(a.jsx)(ie,{children:"No matches found"}):e.map((function(e){return Object(a.jsx)(Q,{id:e.id,photoUrl:e.photoUrl,handle:e.handle,location:e.location,age:e.age,photoCount:e.photoCount},e.id)})):Object(a.jsx)(ie,{children:"Loading profiles..."})}},{key:"render",value:function(){var e=this.context.profiles;return Object(a.jsxs)(ce,{children:[Object(a.jsxs)(se,{children:[Object(a.jsx)(de,{children:Object(a.jsx)(ae,{disabled:!R(this.context)})}),Object(a.jsx)(D,{disabled:!0,children:Object(a.jsx)("img",{src:"filter.svg",width:22,alt:"filter"})}),Object(a.jsx)(D,{disabled:e.length,onClick:this.handleSortAscending,children:Object(a.jsx)("img",{src:"./ascending.svg",width:22,alt:"Sort ascending"})}),Object(a.jsx)(D,{disabled:e.length,onClick:this.handleSortDescending,children:Object(a.jsx)("img",{src:"./descending.svg",width:22,alt:"Sort descending"})})]}),Object(a.jsx)(le,{children:this.renderProfiles(e)})]})}}]),t}(r.a.Component);pe.contextType=T;var he=pe,fe=s.a.header.withConfig({displayName:"Header__HeaderContainer",componentId:"sc-1r8ni2t-0"})(["border-bottom:1px solid hsl(0,0%,94%);padding:16px;"]);function ue(){return Object(a.jsx)(fe,{children:Object(a.jsx)(d.b,{to:"/search",children:Object(a.jsx)("img",{src:"/logo.svg",alt:"match",width:"110"})})})}var xe=s.a.div.withConfig({displayName:"ProfilePage__Main",componentId:"sc-154m2fp-0"})(["display:flex;flex-direction:column;flex-grow:1;"]),ge=s.a.div.withConfig({displayName:"ProfilePage__TopBanner",componentId:"sc-154m2fp-1"})(["display:flex;padding:50px;height:350px;align-items:flex-end;background-color:lightgray;color:#333333;text-transform:capitalize;@media screen and (max-width:500px){flex-direction:column;padding:32px;}"]),je=s.a.div.withConfig({displayName:"ProfilePage__MainInfo",componentId:"sc-154m2fp-2"})(["display:flex;flex-direction:column;margin-left:48px;@media screen and (max-width:500px){flex-direction:row;margin-left:0px;margin-top:16px;align-self:flex-start;}"]),be=s.a.img.withConfig({displayName:"ProfilePage__ImgWrapper",componentId:"sc-154m2fp-3"})(["height:350px;width:350px;@media screen and (max-width:500px){margin-left:auto;margin-right:auto;}"]),me=s.a.span.withConfig({displayName:"ProfilePage__NameWrapper",componentId:"sc-154m2fp-4"})(["font-size:4rem;margin-bottom:24px;@media screen and (max-width:500px){font-size:2rem;margin-bottom:0px;margin-right:16px;}"]),Oe=s.a.span.withConfig({displayName:"ProfilePage__AgeLocationWrapper",componentId:"sc-154m2fp-5"})(["font-size:2rem;margin-bottom:52px;@media screen and (max-width:500px){margin-bottom:0px;}"]),Ce=s.a.div.withConfig({displayName:"ProfilePage__Summary",componentId:"sc-154m2fp-6"})(["padding:50px;background-color:#f8f8f8;color:black;flex-grow:1;@media screen and (max-width:500px){padding:32px;}"]),ye=s.a.div.withConfig({displayName:"ProfilePage__SummaryHeader",componentId:"sc-154m2fp-7"})(["font-size:1.5rem;"]),ve=s.a.div.withConfig({displayName:"ProfilePage__SummaryText",componentId:"sc-154m2fp-8"})(["font-size:1.25rem;margin-top:24px;"]);function we(){var e=Object(l.g)().id,n=Object(i.useContext)(T),t=W(n);if(Object(i.useEffect)((function(){t||oe(n.dispatch,n)}),[]),!t)return Object(a.jsx)(ie,{children:"Loading..."});if(B(n))return Object(a.jsx)(re,{children:"An error occured loading profiles"});var r=function(e,n){return e.profiles.find((function(e){return e.id===Number(n)}))}(n,e),o=r.photoUrl,c=r.location,s=r.age,d=r.handle;return Object(a.jsxs)(xe,{children:[Object(a.jsxs)(ge,{children:[Object(a.jsx)(be,{src:o,alt:"potential date"}),Object(a.jsxs)(je,{children:[Object(a.jsx)(me,{children:d}),Object(a.jsx)(Oe,{children:c?"".concat(s," \u2022 ").concat(c):s})]})]}),Object(a.jsxs)(Ce,{children:[Object(a.jsx)(ye,{children:"Summary:"}),Object(a.jsx)(ve,{children:"Long walks on the beach ...."})]})]})}t(49);var _e=s.a.div.withConfig({displayName:"App__Page",componentId:"m6pi8d-0"})(["display:flex;flex-direction:column;height:100vh;"]);var Pe=function(){return Object(a.jsx)(H,{children:Object(a.jsx)(d.a,{children:Object(a.jsxs)(_e,{children:[Object(a.jsx)(ue,{}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",children:Object(a.jsx)(l.a,{to:"/search"})}),Object(a.jsx)(l.b,{exact:!0,path:"/search",children:Object(a.jsx)(he,{})}),Object(a.jsx)(l.b,{path:"/profile/:id",children:Object(a.jsx)(we,{})})]})]})})})},Ie=document.getElementById("root");c.a.render(Object(a.jsx)(Pe,{}),Ie)}},[[50,1,2]]]);
//# sourceMappingURL=main.06dd26f9.chunk.js.map