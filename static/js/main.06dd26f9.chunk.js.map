{"version":3,"sources":["components/SearchPage/actions.js","components/PollWidget/actions.js","context/ProfilesContext.jsx","context/selectors.js","components/MinimalButton.jsx","components/SearchCard.jsx","components/PollWidget/async.js","components/PollWidget/index.jsx","components/ScreenMessages.jsx","components/SearchPage/async.js","components/SearchPage/index.jsx","components/Header.jsx","components/ProfilePage.jsx","App.js","index.js"],"names":["prefix","sortProfilesAsc","createAction","sortProfilesDesc","requestLoadProfiles","loadProfilesSuccess","loadProfilesError","setAutoFetch","setCountdownText","requestPollProfiles","pollProfilesSuccess","pollProfilesError","payloadReducer","_","action","payload","valueReducer","value","ProfilesReducer","combineReducers","autoFetchProfiles","createReducer","builder","addCase","countdownText","profiles","sort","profileA","profileB","handle","queries","loadProfiles","initial","loading","error","fetchProgress","pollProfiles","ProfilesContext","React","createContext","initialState","undefined","type","ProfilesContextProvider","children","useReducer","state","dispatch","Provider","authToken","pollInterval","getAuthToken","areProfilesLoaded","length","hasLoadProfilesResolved","getLoadProfilesError","getPollInterval","MinimalButton","styled","button","CardContainer","div","Card","CardOverlay","HandleWrapper","h6","BottomInfoRow","SearchCard","this","props","photoUrl","location","age","photoCount","id","to","src","alt","PureComponent","context","abortController","secondsLeft","a","signal","aborted","fetch","method","headers","Headers","Authorization","profileBody","json","console","setTimeout","WidgetContainer","Label","label","PollWidget","useContext","useRef","AbortController","contextRef","current","isAutoFetchEnabled","getCountdownText","useEffect","abort","disabled","onChange","checked","uncheckedIcon","checkedIcon","height","width","handleDiameter","onColor","onHandleColor","offHandleColor","ScreenMessage","ErrorMessage","Main","main","SearchControlsRow","LeftSearchControls","SearchCardsContainer","SearchPage","handleSortAscending","handleSortDescending","map","profile","onClick","renderProfiles","Component","contextType","HeaderContainer","header","Header","TopBanner","MainInfo","ImgWrapper","img","NameWrapper","span","AgeLocationWrapper","Summary","SummaryHeader","SummaryText","ProfilePage","useParams","profilesLoaded","find","Number","getProfileById","Page","App","exact","path","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.06dd26f9.chunk.js","sourcesContent":["import { createAction } from '@reduxjs/toolkit';\n\nconst prefix = 'search/profiles';\n\nexport const sortProfilesAsc = createAction(`${prefix}/sort-ascending`);\nexport const sortProfilesDesc = createAction(`${prefix}/sort-descending`);\n\nexport const requestLoadProfiles = createAction(`${prefix}/request/pending`);\nexport const loadProfilesSuccess = createAction(`${prefix}/response/success`);\nexport const loadProfilesError = createAction(`${prefix}/response/error`);\n","import { createAction } from '@reduxjs/toolkit';\n\nconst prefix = 'search/profiles/poll';\n\nexport const setAutoFetch = createAction(`${prefix}/set-auto-fetch`);\nexport const setCountdownText = createAction(`${prefix}/set-countdown-text`);\n\nexport const requestPollProfiles = createAction(`${prefix}/request/pending`);\nexport const pollProfilesSuccess = createAction(`${prefix}/response/success`);\nexport const pollProfilesError = createAction(`${prefix}/response/error`);\n","import React from 'react';\nimport { combineReducers, createReducer } from '@reduxjs/toolkit';\n\nimport {\n  sortProfilesAsc,\n  sortProfilesDesc,\n  requestLoadProfiles,\n  loadProfilesError,\n  loadProfilesSuccess,\n} from 'components/SearchPage/actions';\nimport {\n  setAutoFetch,\n  setCountdownText,\n  pollProfilesSuccess,\n  pollProfilesError,\n  requestPollProfiles,\n} from 'components/PollWidget/actions';\n\nconst initialQueryState = {\n  initial: true,\n  loading: false,\n  error: null,\n};\n\nconst payloadReducer = (_, action) => action.payload;\nconst valueReducer = (value) => () => value;\n\n// good example of a top level reducer slice\nconst ProfilesReducer = combineReducers({\n  autoFetchProfiles: createReducer(false, (builder) => {\n    builder.addCase(setAutoFetch, payloadReducer);\n    builder.addCase(loadProfilesSuccess, valueReducer(true));\n    builder.addCase(loadProfilesError, valueReducer(true));\n  }),\n\n  countdownText: createReducer('', (builder) => {\n    builder.addCase(setCountdownText, payloadReducer);\n    builder.addCase(setAutoFetch, (_, action) => (action.payload ? '10' : ''));\n  }),\n\n  profiles: createReducer([], (builder) => {\n    // these two cases really ought to be query parameters\n    builder.addCase(sortProfilesAsc, (profiles) =>\n      profiles.sort((profileA, profileB) => (profileA.handle > profileB.handle ? 1 : -1))\n    );\n    builder.addCase(sortProfilesDesc, (profiles) =>\n      profiles.sort((profileA, profileB) => (profileA.handle < profileB.handle ? 1 : -1))\n    );\n    builder.addCase(loadProfilesSuccess, payloadReducer);\n    builder.addCase(pollProfilesSuccess, payloadReducer);\n  }),\n\n  queries: combineReducers({\n    loadProfiles: createReducer(initialQueryState, (builder) => {\n      builder.addCase(requestLoadProfiles, (fetchProgress) => {\n        fetchProgress.loading = true;\n        fetchProgress.initial = false;\n        fetchProgress.error = false;\n        return fetchProgress;\n      });\n      builder.addCase(loadProfilesError, (fetchProgress, action) => {\n        fetchProgress.loading = false;\n        fetchProgress.error = action.payload;\n        return fetchProgress;\n      });\n      builder.addCase(loadProfilesSuccess, (fetchProgress, action) => {\n        fetchProgress.loading = false;\n        return fetchProgress;\n      });\n    }),\n\n    pollProfiles: createReducer({ loading: false, error: null }, (builder) => {\n      builder.addCase(requestPollProfiles, (fetchProgress) => {\n        fetchProgress.loading = true;\n        fetchProgress.error = null;\n        return fetchProgress;\n      });\n      builder.addCase(pollProfilesError, (fetchProgress, action) => {\n        fetchProgress.loading = false;\n        fetchProgress.error = action.payload;\n        return fetchProgress;\n      });\n      builder.addCase(pollProfilesSuccess, (fetchProgress, action) => {\n        fetchProgress.loading = false;\n        fetchProgress.error = null;\n        return fetchProgress;\n      });\n    }),\n  }),\n});\n\nexport const ProfilesContext = React.createContext();\nconst initialState = ProfilesReducer(undefined, { type: '__initialize__' });\n\n// this part might as well just use redux\nexport function ProfilesContextProvider({ children }) {\n  const [state, dispatch] = React.useReducer(ProfilesReducer, initialState);\n\n  return (\n    <ProfilesContext.Provider\n      value={{ ...state, dispatch, authToken: 'Bearer: AbCdEf123456', pollInterval: 10 }}\n    >\n      {children}\n    </ProfilesContext.Provider>\n  );\n}\n","export const getAuthToken = (state) => state.authToken;\nexport const getProfiles = (state) => state.profiles;\n\nexport const areProfilesLoaded = (state) => {\n  const {\n    queries: { loadProfiles },\n    profiles,\n  } = state;\n  return !loadProfiles.initial && (!loadProfiles.loading || profiles.length > 0);\n};\n\nexport const hasLoadProfilesResolved = (state) => {\n  const {\n    queries: { loadProfiles },\n  } = state;\n  return !loadProfiles.initial && !loadProfiles.loading;\n};\n\nexport const getLoadProfilesError = (state) => state.queries.loadProfiles?.error;\nexport const getAutoFetchProfiles = (state) => state.autoFetchProfiles;\nexport const getPollInterval = (state) => state.pollInterval;\nexport const getCountdownText = (state) => state.countdownText;\n\nexport const getProfileById = (state, id) =>\n  state.profiles.find((profile) => profile.id === Number(id));\n","import styled from 'styled-components/macro';\n\nconst MinimalButton = styled.button`\n  background: transparent;\n  border: 0px;\n  cursor: pointer;\n  margin: 8px;\n`;\nexport default MinimalButton;\n","import React from 'react';\nimport styled from 'styled-components/macro';\nimport { Link } from 'react-router-dom';\n\nconst CardContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Card = styled.div`\n  border: 1px solid lightgray;\n  border-radius: 8px;\n  box-shadow: 0px 3px 6px lightgray, 0px 3px 6px;\n  overflow: hidden;\n  position: relative;\n  width: 200px;\n  height: 200px;\n`;\n\nconst CardOverlay = styled.div`\n  position: absolute;\n  width: 100%;\n  bottom: 0px;\n  border-radius: inherit;\n  overflow: hidden;\n  box-sizing: border-box;\n  padding: 8px;\n  color: white;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst HandleWrapper = styled.h6`\n  font-size: 16px;\n  padding-bottom: 4px;\n`;\n\nconst BottomInfoRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n  margin-bottom: 4px;\n  margin-right: 4px;\n`;\n\nexport default class SearchCard extends React.PureComponent {\n  render() {\n    const { photoUrl = '', handle = '', location = '', age = 99, photoCount = 0, id } = this.props;\n\n    return (\n      <CardContainer>\n        <Link to={`/profile/${id}`}>\n          <Card>\n            <img src={photoUrl} alt=\"potential date\"></img>\n            <CardOverlay>\n              <HandleWrapper>{handle}</HandleWrapper>\n              <BottomInfoRow>\n                <span>{location ? `${age} • ${location}` : age}</span>\n                {photoCount > 1 && <span>{photoCount}</span>}\n              </BottomInfoRow>\n            </CardOverlay>\n          </Card>\n        </Link>\n      </CardContainer>\n    );\n  }\n}\n","import {\n  requestPollProfiles,\n  pollProfilesError,\n  pollProfilesSuccess,\n  setCountdownText,\n} from './actions';\nimport { getAuthToken, getPollInterval } from 'context/selectors';\n\nexport const pollProfiles = async (context, abortController, secondsLeft) => {\n  if (!abortController.signal.aborted) {\n    if (secondsLeft === 0) {\n      context.dispatch(setCountdownText('Loading...'));\n      context.dispatch(requestPollProfiles());\n      try {\n        const profileBody = await fetch('/api/profiles', {\n          method: 'get',\n          headers: new Headers({\n            Authorization: getAuthToken(context),\n            'Content-Type': 'application/json',\n          }),\n          signal: abortController.signal,\n        });\n        const profiles = await profileBody.json();\n        context.dispatch(pollProfilesSuccess(profiles));\n      } catch (e) {\n        console.error(e);\n        context.dispatch(pollProfilesError(e));\n      }\n      pollProfiles(context, abortController, getPollInterval(context));\n    } else {\n      context.dispatch(setCountdownText(`${secondsLeft}`));\n      setTimeout(() => pollProfiles(context, abortController, secondsLeft - 1), 1000);\n    }\n  }\n};\n","import React, { useContext, useEffect, useRef } from 'react';\nimport styled from 'styled-components/macro';\nimport Switch from 'react-switch';\n\nimport { ProfilesContext } from 'context/ProfilesContext';\nimport { getAutoFetchProfiles, getPollInterval, getCountdownText } from 'context/selectors';\n\nimport { setAutoFetch } from './actions';\nimport { pollProfiles } from './async';\n\nconst WidgetContainer = styled.div`\n  display: flex;\n  align-items: center;\n  font-size: 1.333rem;\n`;\n\nconst Label = styled.label`\n  display: flex;\n  cursor: pointer;\n  align-items: center;\n  font-size: 1.333rem;\n  & > * {\n    margin-right: 0.5rem;\n    user-select: none;\n  }\n`;\n\nexport default function PollWidget(props) {\n  const context = useContext(ProfilesContext);\n  const abortController = useRef(new AbortController());\n  const contextRef = useRef();\n  contextRef.current = context;\n\n  const isAutoFetchEnabled = getAutoFetchProfiles(context);\n  const pollInterval = getPollInterval(context);\n  const countdownText = getCountdownText(context);\n\n  // this seems much easier with sagas, much cleaner code too\n  useEffect(() => {\n    abortController.current.abort();\n    if (isAutoFetchEnabled) {\n      abortController.current = new AbortController();\n      pollProfiles(contextRef.current, abortController.current, pollInterval);\n    }\n  }, [isAutoFetchEnabled, pollInterval]);\n\n  return (\n    <WidgetContainer>\n      <Label>\n        <span>Auto-Refetch</span>\n        <Switch\n          disabled={props.disabled}\n          onChange={(checked) => context.dispatch(setAutoFetch(checked))}\n          checked={isAutoFetchEnabled}\n          uncheckedIcon={false}\n          checkedIcon={false}\n          height={20}\n          width={48}\n          handleDiameter={28}\n          onColor=\"#899bf5\"\n          onHandleColor=\"#1234e6\"\n          offHandleColor=\"#CCCCCC\"\n        />\n      </Label>\n      <span>{countdownText}</span>\n    </WidgetContainer>\n  );\n}\n","import styled from 'styled-components/macro';\n\nexport const ScreenMessage = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-grow: 1;\n  font-size: 4em;\n`;\n\nexport const ErrorMessage = styled(ScreenMessage)`\n  color: red;\n`;\n","import { getAuthToken } from 'context/selectors';\n\nimport { requestLoadProfiles, loadProfilesSuccess, loadProfilesError } from './actions';\n\nexport const loadProfiles = async (dispatch, state) => {\n  dispatch(requestLoadProfiles());\n  try {\n    const profileBody = await fetch('/api/profiles', {\n      method: 'get',\n      headers: new Headers({\n        Authorization: getAuthToken(state),\n        'Content-Type': 'application/json',\n      }),\n    });\n    const profiles = await profileBody.json();\n    dispatch(loadProfilesSuccess(profiles));\n  } catch (e) {\n    console.error(e);\n    dispatch(loadProfilesError(e));\n  }\n};\n","import React from 'react';\nimport styled from 'styled-components/macro';\n\nimport { ProfilesContext } from 'context/ProfilesContext';\nimport {\n  areProfilesLoaded,\n  getLoadProfilesError,\n  getProfiles,\n  hasLoadProfilesResolved,\n} from 'context/selectors';\n\nimport MinimalButton from 'components/MinimalButton';\nimport SearchCard from 'components/SearchCard';\nimport PollWidget from 'components/PollWidget';\nimport { ScreenMessage, ErrorMessage } from 'components/ScreenMessages';\n\nimport { sortProfilesAsc, sortProfilesDesc } from './actions';\nimport { loadProfiles } from './async';\n\nconst Main = styled.main`\n  margin: 24px;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n`;\n\nconst SearchControlsRow = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n`;\n\nconst LeftSearchControls = styled.div`\n  margin-right: auto;\n`;\n\nconst SearchCardsContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 40px;\n  margin-top: 16px;\n  @media screen and (max-width: 500px) {\n    justify-content: center;\n  }\n`;\n\nclass SearchPage extends React.Component {\n  static contextType = ProfilesContext;\n\n  componentDidMount() {\n    if (!areProfilesLoaded(this.context)) {\n      loadProfiles(this.context.dispatch, this.context);\n    }\n  }\n\n  handleSortAscending = () => {\n    this.context.dispatch(sortProfilesAsc());\n  };\n\n  handleSortDescending = () => {\n    this.context.dispatch(sortProfilesDesc());\n  };\n\n  renderProfiles(profiles) {\n    if (!areProfilesLoaded(this.context)) {\n      // TODO skeleton screens would be pretty nice here, less flicker too\n      return <ScreenMessage>Loading profiles...</ScreenMessage>;\n    }\n\n    const loadError = getLoadProfilesError(this.context);\n    if (loadError) {\n      return <ErrorMessage>An error occured loading profiles</ErrorMessage>;\n    }\n\n    if (profiles.length === 0) {\n      return <ScreenMessage>No matches found</ScreenMessage>;\n    }\n\n    return profiles.map((profile) => (\n      <SearchCard\n        key={profile.id}\n        id={profile.id}\n        photoUrl={profile.photoUrl}\n        handle={profile.handle}\n        location={profile.location}\n        age={profile.age}\n        photoCount={profile.photoCount}\n      />\n    ));\n  }\n\n  render() {\n    const profiles = getProfiles(this.context);\n\n    return (\n      <Main>\n        <SearchControlsRow>\n          <LeftSearchControls>\n            <PollWidget disabled={!hasLoadProfilesResolved(this.context)} />\n          </LeftSearchControls>\n          <MinimalButton disabled>\n            <img src=\"filter.svg\" width={22} alt=\"filter\" />\n          </MinimalButton>\n\n          <MinimalButton disabled={profiles.length} onClick={this.handleSortAscending}>\n            <img src=\"./ascending.svg\" width={22} alt=\"Sort ascending\" />\n          </MinimalButton>\n\n          <MinimalButton disabled={profiles.length} onClick={this.handleSortDescending}>\n            <img src=\"./descending.svg\" width={22} alt=\"Sort descending\" />\n          </MinimalButton>\n        </SearchControlsRow>\n\n        <SearchCardsContainer>{this.renderProfiles(profiles)}</SearchCardsContainer>\n      </Main>\n    );\n  }\n}\n\nexport default SearchPage;\n","import React from 'react';\nimport styled from 'styled-components/macro';\nimport { Link } from 'react-router-dom';\n\nconst HeaderContainer = styled.header`\n  border-bottom: 1px solid hsl(0, 0%, 94%);\n  padding: 16px;\n`;\n\nexport default function Header() {\n  return (\n    <HeaderContainer>\n      <Link to=\"/search\">\n        <img src=\"/logo.svg\" alt=\"match\" width=\"110\" />\n      </Link>\n    </HeaderContainer>\n  );\n}\n","import React, { useContext, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport { ProfilesContext } from 'context/ProfilesContext';\nimport { getProfileById, areProfilesLoaded, getLoadProfilesError } from 'context/selectors';\n\nimport { loadProfiles } from 'components/SearchPage/async';\nimport { ScreenMessage, ErrorMessage } from 'components/ScreenMessages';\n\nconst Main = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n`;\n\nconst TopBanner = styled.div`\n  display: flex;\n  padding: 50px;\n  height: 350px;\n  align-items: flex-end;\n  background-color: lightgray;\n  color: #333333;\n  text-transform: capitalize;\n  @media screen and (max-width: 500px) {\n    flex-direction: column;\n    padding: 32px;\n  }\n`;\n\nconst MainInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-left: 48px;\n  @media screen and (max-width: 500px) {\n    flex-direction: row;\n    margin-left: 0px;\n    margin-top: 16px;\n    align-self: flex-start;\n  }\n`;\n\nconst ImgWrapper = styled.img`\n  height: 350px;\n  width: 350px;\n  @media screen and (max-width: 500px) {\n    margin-left: auto;\n    margin-right: auto;\n  }\n`;\n\nconst NameWrapper = styled.span`\n  font-size: 4rem;\n  margin-bottom: 24px;\n  @media screen and (max-width: 500px) {\n    font-size: 2rem;\n    margin-bottom: 0px;\n    margin-right: 16px;\n  }\n`;\n\nconst AgeLocationWrapper = styled.span`\n  font-size: 2rem;\n  margin-bottom: 52px;\n  @media screen and (max-width: 500px) {\n    margin-bottom: 0px;\n  }\n`;\n\nconst Summary = styled.div`\n  padding: 50px;\n  background-color: #f8f8f8;\n  color: black;\n  flex-grow: 1;\n  @media screen and (max-width: 500px) {\n    padding: 32px;\n  }\n`;\n\nconst SummaryHeader = styled.div`\n  font-size: 1.5rem;\n`;\n\nconst SummaryText = styled.div`\n  font-size: 1.25rem;\n  margin-top: 24px;\n`;\n\nexport default function ProfilePage() {\n  const { id } = useParams();\n  const context = useContext(ProfilesContext);\n  const profilesLoaded = areProfilesLoaded(context);\n\n  useEffect(() => {\n    if (!profilesLoaded) {\n      loadProfiles(context.dispatch, context);\n    }\n  }, []); // eslint-disable-line\n\n  if (!profilesLoaded) {\n    // TODO replace with a skeleton screen\n    return <ScreenMessage>Loading...</ScreenMessage>;\n  }\n\n  const loadError = getLoadProfilesError(context);\n  if (loadError) {\n    return <ErrorMessage>An error occured loading profiles</ErrorMessage>;\n  }\n\n  const { photoUrl, location, age, handle } = getProfileById(context, id);\n\n  return (\n    <Main>\n      <TopBanner>\n        <ImgWrapper src={photoUrl} alt=\"potential date\"></ImgWrapper>\n        <MainInfo>\n          <NameWrapper>{handle}</NameWrapper>\n          <AgeLocationWrapper>{location ? `${age} • ${location}` : age}</AgeLocationWrapper>\n        </MainInfo>\n      </TopBanner>\n      <Summary>\n        <SummaryHeader>Summary:</SummaryHeader>\n        <SummaryText>Long walks on the beach ....</SummaryText>\n      </Summary>\n    </Main>\n  );\n}\n","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport SearchPage from 'components/SearchPage';\nimport Header from 'components/Header';\nimport ProfilePage from 'components/ProfilePage';\n\nimport { ProfilesContextProvider } from 'context/ProfilesContext';\n\nimport './styles.css';\n\nconst Page = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n`;\n\nfunction App() {\n  return (\n    <ProfilesContextProvider>\n      <Router>\n        <Page>\n          <Header />\n          <Switch>\n            <Route exact path=\"/\">\n              <Redirect to=\"/search\" />\n            </Route>\n            <Route exact path=\"/search\">\n              <SearchPage />\n            </Route>\n            <Route path=\"/profile/:id\">\n              <ProfilePage />\n            </Route>\n          </Switch>\n        </Page>\n      </Router>\n    </ProfilesContextProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}